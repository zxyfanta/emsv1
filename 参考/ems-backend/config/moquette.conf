##############################################
# Moquette MQTT Broker Configuration
# EMS企业级MQTT设备管理云平台
##############################################

# 基本服务器配置
port 1883
host 0.0.0.0

# WebSocket支持（可选）
websocket_port 8083

# 持久化存储
persistent_store_enabled true
# 使用内存存储（开发环境）
# persistent_store_type memory
# 或者使用文件存储
persistent_store_type file
storage_file_path ./moquette_store.mapdb

# ACL访问控制文件
acl_file config/moquette.acl

# 口令认证文件
password_file config/moquette.passwd

# 日志配置
log_file_name ./logs/moquette.log
log_level DEBUG

# 连接配置
max_inflight_messages 10
max_clientid_length 23
allow_zero_byte_clientid false

# 安全配置（生产环境启用）
# ssl_port 8883
# jks_path config/keystore.jks
# key_store_password changeit
# key_manager_password changeit

# 性能调优
max_message_size 268435456  # 256MB
netty_so_backlog 128
netty_so_rcvbuf 65536
netty_so_sndbuf 65536

# 会话管理
session_expiry_interval 1800  # 30分钟

# 保持连接
keep_alive_timeout 120  # 2分钟

# 主题配置
allow_anonymous true  # 开发环境允许匿名连接