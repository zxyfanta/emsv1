# EMSéƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®**: EMS (Energy Management System)
- **ç‰ˆæœ¬**: 1.0
- **æ›´æ–°æ—¥æœŸ**: 2025-12-30
- **æ–‡æ¡£ç±»å‹**: éƒ¨ç½²æŒ‡å—

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EMS åº”ç”¨å±‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Frontend    â”‚  â”‚   Backend    â”‚  â”‚  Node-RED    â”‚      â”‚
â”‚  â”‚  Vue.js 3    â”‚  â”‚  Spring Boot â”‚  â”‚  æ¨¡æ‹Ÿå™¨      â”‚      â”‚
â”‚  â”‚  :5173       â”‚  â”‚  :8080       â”‚  â”‚  :1880       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                 â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â”‚                 â”‚                 â–¼
          â”‚                 â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                 â”‚          â”‚  Mosquitto   â”‚
          â”‚                 â”‚          â”‚  MQTT Broker â”‚
          â”‚                 â”‚          â”‚  :1883       â”‚
          â”‚                 â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚
          â”‚                 â–¼
          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚          â”‚   ä¸­é—´ä»¶å±‚            â”‚
          â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”â”‚
          â”‚          â”‚  â”‚  MySQL  â”‚  â”‚Redisâ”‚â”‚
          â”‚          â”‚  â”‚  :3306  â”‚  â”‚:6379â”‚â”‚
          â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜â”‚
          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚         å¤–éƒ¨ç›‘ç®¡å¹³å°                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  å±±ä¸œå¹³å°: 221.214.62.118:20050     â”‚
  â”‚  å››å·å¹³å°: 59.225.208.12:18085      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®¹å™¨æ¶æ„

Docker Composeç®¡ç†4ä¸ªå®¹å™¨ï¼š

| æœåŠ¡å | å®¹å™¨å | ç«¯å£ | ç”¨é€” |
|--------|--------|------|------|
| mysql | ems-mysql | 3306 | å…³ç³»å‹æ•°æ®åº“ |
| redis | ems-redis | 6379 | ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ |
| mosquitto | ems-mosquitto | 1883 | MQTTæ¶ˆæ¯ä»£ç† |
| nodered | ems-nodered | 1880 | è®¾å¤‡æ¨¡æ‹Ÿå™¨å’Œæµç¨‹ç¼–è¾‘å™¨ |

**åç«¯æœåŠ¡**: ç‹¬ç«‹è¿è¡Œåœ¨å®¿ä¸»æœºï¼ˆç«¯å£8080ï¼‰ï¼Œä¸é€šè¿‡Dockeréƒ¨ç½²ã€‚

---

## ğŸ“¦ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€ï¼šDocker Composeéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å‰ç½®è¦æ±‚

- Docker Engine 20.10+
- Docker Compose 2.0+
- Java 17+ ï¼ˆè¿è¡Œåç«¯ï¼‰
- Node.js 18+ ï¼ˆè¿è¡Œå‰ç«¯ï¼‰

#### 2. å¯åŠ¨åŸºç¡€æœåŠ¡

```bash
# å¯åŠ¨MySQLã€Redisã€Mosquittoã€Node-RED
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

#### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend

# æ–¹å¼1: Mavenç›´æ¥è¿è¡Œ
mvn spring-boot:run

# æ–¹å¼2: æ‰“åŒ…åè¿è¡Œ
mvn clean package
java -jar target/backend-1.0.0.jar

# æ–¹å¼3: å¼€å‘ç¯å¢ƒï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
mvn spring-boot:run -Dspring-boot.run.profiles=dev
```

#### 4. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–è€…æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
npm run preview
```

#### 5. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥åç«¯å¥åº·çŠ¶æ€
curl http://localhost:8080/api/actuator/health

# æ£€æŸ¥å‰ç«¯
curl http://localhost:5173

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose ps
```

---

### æ–¹å¼äºŒï¼šå®Œå…¨å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

#### 1. æ„å»ºåç«¯é•œåƒ

```bash
cd backend

# æ„å»ºDockeré•œåƒ
docker build -t ems-backend:latest .

# æˆ–ä½¿ç”¨Mavenæ’ä»¶æ„å»º
mvn clean package docker:build
```

#### 2. æ„å»ºå‰ç«¯é•œåƒ

```bash
cd frontend

# æ„å»ºDockeré•œåƒ
docker build -t ems-frontend:latest .
```

#### 3. ä½¿ç”¨docker-compose-prod.yml

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåŒ…æ‹¬åç«¯å’Œå‰ç«¯ï¼‰
docker-compose -f docker-compose-prod.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose-prod.yml ps
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯é…ç½®

**é…ç½®æ–‡ä»¶**: `backend/src/main/resources/application.yaml`

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ems_db
    username: ems_user
    password: ems_password
  redis:
    host: localhost
    port: 6379

ems:
  mqtt:
    host: localhost
    port: 1883
    topic-prefix: ems
  data-report:
    shandong:
      host: 221.214.62.118
      port: 20050
    sichuan:
      url: http://59.225.208.12:18085
```

### ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–é…ç½®ï¼š

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `SERVER_PORT` | åç«¯ç«¯å£ | 8080 |
| `SPRING_DATASOURCE_URL` | æ•°æ®åº“URL | jdbc:mysql://localhost:3306/ems_db |
| `SPRING_DATASOURCE_USERNAME` | æ•°æ®åº“ç”¨æˆ· | ems_user |
| `SPRING_DATASOURCE_PASSWORD` | æ•°æ®åº“å¯†ç  | ems_password |
| `SPRING_REDIS_HOST` | Redisä¸»æœº | localhost |
| `SPRING_REDIS_PORT` | Redisç«¯å£ | 6379 |
| `EMS_MQTT_HOST` | MQTTä¸»æœº | localhost |
| `EMS_MQTT_PORT` | MQTTç«¯å£ | 1883 |
| `EMS_SECURITY_JWT_SECRET` | JWTå¯†é’¥ | (é»˜è®¤å¯†é’¥) |
| `EMS_SECURITY_JWT_EXPIRATION` | JWTè¿‡æœŸæ—¶é—´ | 86400000 |

### å‰ç«¯é…ç½®

**é…ç½®æ–‡ä»¶**: `frontend/src/config/index.ts`

```typescript
export const config = {
  apiBaseUrl: 'http://localhost:8080/api',
  sseUrl: 'http://localhost:8080/api/sse/subscribe',
  mqttUrl: 'ws://localhost:1883',
  timeout: 30000
}
```

---

## ğŸ§ª æµ‹è¯•ç¯å¢ƒ

### æµ‹è¯•æ•°æ®åº“åˆå§‹åŒ–

```bash
# è¿æ¥åˆ°MySQLå®¹å™¨
docker exec -it ems-mysql mysql -u ems_user -pems_password ems_db

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
source /docker-entrypoint-initdb.d/init.sql
```

### åˆ›å»ºæµ‹è¯•è®¾å¤‡

```bash
# ä½¿ç”¨SQLè„šæœ¬åˆ›å»ºæµ‹è¯•è®¾å¤‡
mysql -u ems_user -pems_password ems_db < tests/sql/create_shandong_test_device.sql
```

### Node-REDè®¾å¤‡æ¨¡æ‹Ÿå™¨

è®¿é—® http://localhost:1880 æŸ¥çœ‹å’Œç¼–è¾‘è®¾å¤‡æ¨¡æ‹Ÿæµç¨‹ã€‚

é¢„ç½®æµ‹è¯•è®¾å¤‡ï¼š

| è®¾å¤‡ç¼–ç  | ç±»å‹ | çŠ¶æ€ | ä¸ŠæŠ¥åè®® |
|---------|------|------|----------|
| 865229085145869 | è¾å°„è®¾å¤‡ | å·²æ³¨å†Œ | SHANDONG |
| RAD-001 | è¾å°„è®¾å¤‡ | å·²æ³¨å†Œ | - |
| ENV-001 | ç¯å¢ƒè®¾å¤‡ | å·²æ³¨å†Œ | - |

---

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### 1. æ•°æ®åº“å‡†å¤‡

```bash
# åˆ›å»ºç”Ÿäº§æ•°æ®åº“
docker exec -it ems-mysql mysql -u root -p

CREATE DATABASE ems_prod CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'ems_prod'@'%' IDENTIFIED BY 'strong_password';
GRANT ALL PRIVILEGES ON ems_prod.* TO 'ems_prod'@'%';
FLUSH PRIVILEGES;
```

### 2. åç«¯é…ç½®ä¼˜åŒ–

**application-prod.yaml**:

```yaml
spring:
  datasource:
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
  redis:
    lettuce:
      pool:
        max-active: 20
        max-idle: 10
        min-idle: 5

logging:
  level:
    com.cdutetc.ems: INFO
  file:
    name: /var/log/ems/backend.log
    max-size: 100MB
    max-history: 30
```

### 3. ä½¿ç”¨Nginxåå‘ä»£ç†

**nginx.conf**:

```nginx
upstream backend {
    server localhost:8080;
}

upstream frontend {
    server localhost:5173;
}

server {
    listen 80;
    server_name ems.example.com;

    # å‰ç«¯é™æ€èµ„æº
    location / {
        proxy_pass http://frontend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # åç«¯API
    location /api {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

        # SSEæ”¯æŒ
        proxy_buffering off;
        proxy_cache off;
        proxy_set_header Connection '';
        proxy_http_version 1.1;
        chunked_transfer_encoding off;
    }
}
```

### 4. ä½¿ç”¨systemdç®¡ç†æœåŠ¡

**/etc/systemd/system/ems-backend.service**:

```ini
[Unit]
Description=EMS Backend Service
After=network.target mysql.service redis.service

[Service]
Type=simple
User=ems
WorkingDirectory=/opt/ems/backend
ExecStart=/usr/bin/java -jar /opt/ems/backend/backend-1.0.0.jar
Restart=always
RestartSec=10
Environment="SPRING_PROFILES_ACTIVE=prod"

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl enable ems-backend
sudo systemctl start ems-backend
sudo systemctl status ems-backend
```

---

## ğŸ” ç›‘æ§å’Œæ—¥å¿—

### åç«¯æ—¥å¿—

```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f /tmp/ems-backend.log

# æŸ¥çœ‹ç‰¹å®šæ¨¡å—æ—¥å¿—
tail -f /tmp/ems-backend.log | grep "DataReport"

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /tmp/ems-backend.log | grep "ERROR"
```

### Dockerå®¹å™¨æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šå®¹å™¨æ—¥å¿—
docker-compose logs -f mysql
docker-compose logs -f redis
docker-compose logs -f mosquitto
docker-compose logs -f nodered
```

### æ•°æ®åº“ç›‘æ§

```bash
# è¿æ¥åˆ°MySQL
docker exec -it ems-mysql mysql -u ems_user -pems_password ems_db

# æŸ¥çœ‹è¿æ¥æ•°
SHOW STATUS LIKE 'Threads_connected';

# æŸ¥çœ‹æŸ¥è¯¢ç»Ÿè®¡
SHOW STATUS LIKE 'Questions';
```

### Redisç›‘æ§

```bash
# è¿æ¥åˆ°Redis
docker exec -it ems-redis redis-cli

# æŸ¥çœ‹ä¿¡æ¯
INFO

# æŸ¥çœ‹é”®æ•°é‡
DBSIZE

# æŸ¥çœ‹è®¾å¤‡çŠ¶æ€ç¼“å­˜
GET device:cpm:865229085145869
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. åç«¯æ— æ³•è¿æ¥MySQL

**ç—‡çŠ¶**: `java.sql.SQLException: Access denied for user`

**è§£å†³**:
```bash
# æ£€æŸ¥MySQLå®¹å™¨çŠ¶æ€
docker-compose ps mysql

# æ£€æŸ¥MySQLæ—¥å¿—
docker-compose logs mysql

# éªŒè¯è¿æ¥
docker exec -it ems-mysql mysql -u ems_user -pems_password ems_db
```

#### 2. MQTTè¿æ¥å¤±è´¥

**ç—‡çŠ¶**: `MqttException: Unable to connect to MQTT broker`

**è§£å†³**:
```bash
# æ£€æŸ¥Mosquittoå®¹å™¨
docker-compose ps mosquitto

# æµ‹è¯•MQTTè¿æ¥
docker exec ems-mosquitto mosquitto_pub -t test -m "hello"

# æ£€æŸ¥é˜²ç«å¢™
telnet localhost 1883
```

#### 3. Redisè¿æ¥è¶…æ—¶

**ç—‡çŠ¶**: `redis.clients.jedis.exceptions.JedisConnectionException`

**è§£å†³**:
```bash
# æ£€æŸ¥Rediså®¹å™¨
docker-compose ps redis

# æµ‹è¯•Redisè¿æ¥
docker exec ems-redis redis-cli PING

# æ¸…ç†Rediså†…å­˜
docker exec ems-redis redis-cli FLUSHALL
```

#### 4. æ•°æ®ä¸ŠæŠ¥å¤±è´¥

**ç—‡çŠ¶**: `å±±ä¸œåè®®ä¸ŠæŠ¥å¤±è´¥`

**è§£å†³**:
```bash
# æµ‹è¯•å±±ä¸œæœåŠ¡å™¨è¿é€šæ€§
telnet 221.214.62.118 20050

# æŸ¥çœ‹ä¸ŠæŠ¥æ—¥å¿—
tail -f /tmp/ems-backend.log | grep "ShandongDataReportService"

# æ£€æŸ¥è®¾å¤‡é…ç½®
curl http://localhost:8080/api/devices/865229085145869/report-config
```

#### 5. SSEè¿æ¥æ–­å¼€

**ç—‡çŠ¶**: å‰ç«¯æ— æ³•æ¥æ”¶å®æ—¶æ•°æ®

**è§£å†³**:
```bash
# æ£€æŸ¥åç«¯SSEç«¯ç‚¹
curl -N http://localhost:8080/api/sse/subscribe

# æ£€æŸ¥Nginxé…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
# ç¡®ä¿ä»¥ä¸‹é…ç½®å­˜åœ¨ï¼š
# proxy_buffering off;
# proxy_cache off;
# proxy_set_header Connection '';
# proxy_http_version 1.1;
```

---

## ğŸ”„ å¤‡ä»½å’Œæ¢å¤

### æ•°æ®åº“å¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®åº“
docker exec ems-mysql mysqldump -u ems_user -pems_password ems_db > backup.sql

# æ¢å¤æ•°æ®åº“
docker exec -i ems-mysql mysql -u ems_user -pems_password ems_db < backup.sql
```

### Rediså¤‡ä»½

```bash
# å¤‡ä»½Redisæ•°æ®
docker exec ems-redis redis-cli SAVE

# å¤åˆ¶RDBæ–‡ä»¶
docker cp ems-redis:/data/dump.rdb ./redis-backup.rdb
```

### é…ç½®å¤‡ä»½

```bash
# å¤‡ä»½é…ç½®æ–‡ä»¶
tar -czf ems-config-backup.tar.gz \
  backend/src/main/resources/application*.yaml \
  frontend/src/config/ \
  docker-compose.yml \
  nodered/flows/
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–

```sql
-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_device_data_created_at ON radiation_device_data(created_at);
CREATE INDEX idx_device_data_device_id ON radiation_device_data(device_id);
CREATE INDEX idx_report_log_device_code ON ems_data_report_log(device_code);
CREATE INDEX idx_report_log_created_at ON ems_data_report_log(created_at);

-- åˆ†æè¡¨
ANALYZE TABLE radiation_device_data;
ANALYZE TABLE ems_data_report_log;
```

### Redisä¼˜åŒ–

```bash
# è®¾ç½®æœ€å¤§å†…å­˜
docker exec ems-redis redis-cli CONFIG SET maxmemory 512mb

# è®¾ç½®æ·˜æ±°ç­–ç•¥
docker exec ems-redis redis-cli CONFIG SET maxmemory-policy allkeys-lru

# æŒä¹…åŒ–é…ç½®
docker exec ems-redis redis-cli CONFIG SET save "900 1 300 10 60 10000"
```

### JVMä¼˜åŒ–

```bash
# å¯åŠ¨æ—¶æ·»åŠ JVMå‚æ•°
java -Xms512m -Xmx2g \
     -XX:+UseG1GC \
     -XX:MaxGCPauseMillis=200 \
     -XX:+HeapDumpOnOutOfMemoryError \
     -XX:HeapDumpPath=/var/log/ems/ \
     -jar backend-1.0.0.jar
```

---

## ğŸ”’ å®‰å…¨åŠ å›º

### 1. ä¿®æ”¹é»˜è®¤å¯†ç 

```bash
# ä¿®æ”¹MySQL rootå¯†ç 
docker exec -it ems-mysql mysql -u root -p
ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_strong_password';

# ä¿®æ”¹Rediså¯†ç 
# ç¼–è¾‘docker-compose.ymlï¼Œæ·»åŠ å‘½ä»¤ï¼š
# redis:
#   command: redis-server --requirepass your_strong_password
```

### 2. é…ç½®é˜²ç«å¢™

```bash
# åªå…è®¸å¿…è¦ç«¯å£
ufw allow 80/tcp
ufw allow 443/tcp
ufw allow 22/tcp
ufw enable
```

### 3. å¯ç”¨HTTPS

```bash
# ä½¿ç”¨Let's Encryptè·å–è¯ä¹¦
sudo certbot --nginx -d ems.example.com

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„è®¾è®¡](./ç³»ç»Ÿæ¶æ„è®¾è®¡.md)
- [APIæ¥å£æ–‡æ¡£](./APIæ¥å£æ–‡æ¡£.md)
- [æ•°æ®æµå¤„ç†è¯´æ˜](./æ•°æ®æµå¤„ç†è¯´æ˜.md)

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0*
*æœ€åæ›´æ–°: 2025-12-30*
